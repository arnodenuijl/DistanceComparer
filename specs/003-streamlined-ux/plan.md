# Implementation Plan: Streamlined UX Improvements

**Branch**: `003-streamlined-ux` | **Date**: February 28, 2026 | **Spec**: [spec.md](spec.md)  
**Input**: Feature specification from `/specs/003-streamlined-ux/spec.md`

**Note**: This plan was generated by the `/speckit.plan` command.

## Summary

Improve the Distance Comparer user experience by: (1) auto-activating the distance tool on page load, (2) adding clear usage instructions in the header, (3) removing debug UI elements (layout-indicator, event-log), and (4) providing reset functionality to clear lines and start over. This enables first-time users to create distance comparisons within 30 seconds without configuration, while allowing rapid iteration through multiple comparisons.

**Technical Approach**: Modify App.vue to initialize `showDistanceTool=true` and `isCreatingLine=true` on mount, replace event-log/layout-indicator with usage instruction text, and add reset button in header that clears line state and reinitializes creation mode.

## Technical Context

**Language/Version**: TypeScript 5.9.3 with strict mode enabled  
**Primary Dependencies**: Vue 3.5.25, Leaflet 1.9.4  
**Storage**: N/A (client-side only, no persistence)  
**Testing**: None (per Principle VI: testing optional for UX polish features)  
**Target Platform**: Modern browsers (ES2020+), responsive web (desktop + mobile)  
**Project Type**: Single-page web application (SPA)  
**Performance Goals**: <100ms perceived sync latency for distance updates (existing constraint), <3s initial load (existing)  
**Constraints**: Must maintain keyboard navigation, screen reader compatibility (Principle IV)  
**Scale/Scope**: Single-page application, ~15 Vue components, 3 features (dual maps, distance tool, responsive layout)

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Principle I: User-First Design
**Status**: ✅ PASS  
This feature directly serves the constitution's mandate for "intuitive UI interactions requiring minimal clicks." Auto-activating the tool and adding instructions reduces friction for new users. Removing debug UI improves focus on core tasks.

### Principle II: Component Architecture
**Status**: ✅ PASS  
Changes are isolated to App.vue (presentation layer). Existing MapPanel, MapContainer, and DistanceLine components remain unmodified. No new global state introduced.

### Principle III: Type Safety
**Status**: ✅ PASS  
All existing TypeScript types remain. New header instruction text is static (no new types needed). Reset functionality uses existing ref types (boolean, string).

### Principle IV: Responsive & Accessible
**Status**: ✅ PASS - with attention  
Layout-indicator removal does not impact accessibility (was purely visual debug). Must ensure:
- Usage instructions have proper semantic HTML (`<p>` or `<div role="status">`)
- Reset button is keyboard accessible with `tabindex` and clear label
- Screen reader announcements for "tool reset" state change

### Principle V: Performance
**Status**: ✅ PASS  
No performance impact. Removing debug elements slightly reduces DOM size. Auto-activation moves existing initialization from button click to mount hook (no computational change).

### Principle VI: Testing Flexibility
**Status**: ✅ PASS  
No tests required for this UX polish feature. Manual testing sufficient per constitution's advisory testing policy.

### Principle VII: Simplicity
**Status**: ✅ PASS  
Feature **removes** complexity (no activation button, less debug UI). Reset functionality is minimal state management (clear refs, re-initialize). No new dependencies.

**Overall Gate**: ✅ PASS - Proceeding to Phase 0

## Project Structure

### Documentation (this feature)

```text
specs/003-streamlined-ux/
├── plan.md              # This file
├── research.md          # Phase 0 output (minimal - no tech decisions)
├── data-model.md        # Phase 1 output (UI state model)
├── quickstart.md        # Phase 1 output (how to use reset + instructions)
└── contracts/           # Phase 1 output (if needed - likely minimal)
```

### Source Code (repository root)

```text
distance-comparer/
├── src/
│   ├── App.vue                    # PRIMARY MODIFICATION: Remove debug UI, add instructions, auto-activate, reset
│   ├── components/
│   │   ├── MapContainer.vue       # NO CHANGES (container layout)
│   │   ├── MapPanel.vue           # NO CHANGES (map instance wrapper)
│   │   └── DistanceLine.vue       # POTENTIAL: Add clearLine() method if needed
│   ├── composables/               # NO CHANGES (business logic unaffected)
│   ├── config/                    # NO CHANGES
│   └── types/                     # NO CHANGES (existing types sufficient)
├── public/
└── package.json
```

**Structure Decision**: Single Vue SPA (Option 1 variant). All changes are in the presentation layer (App.vue). This is a pure UI refactor with no backend, API, or new component needs. The existing component architecture (MapContainer > MapPanel > DistanceLine) continues to handle map logic and distance calculations.

## Complexity Tracking

**Status**: N/A - No constitution violations detected.

All changes align with existing architecture and principles. This feature simplifies the user interface by removing debugging elements and streamlining initialization.

## Post-Design Constitution Re-Check

*GATE: Final validation after Phase 1 artifacts completed.*

### Design Artifacts Review

**Completed Documents**:
- ✅ [research.md](research.md) - No new technology decisions, all patterns exist in codebase
- ✅ [data-model.md](data-model.md) - UI state model with clear transitions and validation rules
- ✅ [contracts/App-UX.contract.md](contracts/App-UX.contract.md) - User interface behavior contract with accessibility requirements
- ✅ [quickstart.md](quickstart.md) - End-user guide for streamlined interface

### Constitution Compliance After Design

**Principle I: User-First Design**  
**Status**: ✅ CONFIRMED  
- Quickstart guide demonstrates clear user journey (3 simple steps)
- UX contract specifies observable behaviors matching user needs
- Auto-activation + instructions achieve <30s time-to-first-measurement goal

**Principle II: Component Architecture**  
**Status**: ✅ CONFIRMED  
- Data model confirms single-responsibility: App.vue handles presentation, DistanceLine handles distance logic
- No new components needed, existing boundaries respected
- Reset flow documented with clear parent-child communication via template refs

**Principle III: Type Safety**  
**Status**: ✅ CONFIRMED  
- Data model specifies all state types (boolean, string) - existing TypeScript types sufficient
- No \ny\ types introduced
- Research confirms ref-based state management maintains type safety

**Principle IV: Responsive & Accessible**  
**Status**: ✅ CONFIRMED with implementation requirements  
- UX contract includes explicit WCAG 2.1 Level AA requirements
- Keyboard navigation defined (Tab order, Enter/Space activation)
- Screen reader announcements specified for state changes
- Responsive behavior documented for desktop/mobile viewports
- ⚠️ **Action Required**: Implement aria-live region and semantic HTML as specified in contract

**Principle V: Performance**  
**Status**: ✅ CONFIRMED  
- Data model documents memory impact: ~48 bytes (negligible)
- Research confirms removing event-log reduces DOM updates (performance improvement)
- Reset operation: <1ms state clear + <500ms perceived completion per UX contract
- No heavy computations added

**Principle VI: Testing Flexibility**  
**Status**: ✅ CONFIRMED  
- No tests mandated; UX contract includes optional automated validation patterns
- Manual testing checklist provided in contract (pragmatic approach)
- Research decision documents why tests are advisory

**Principle VII: Simplicity**  
**Status**: ✅ CONFIRMED  
- Research confirms zero new dependencies
- Data model shows state complexity unchanged (same refs, different initialization)
- Reset implementation reuses existing patterns (template refs, component remount)
- Feature achieves goals by **removing** UI elements, not adding complexity

### Final Gate Decision

**Status**: ✅ **PASS** - Ready for /speckit.tasks

**Summary**: All seven constitutional principles satisfied after design phase. Implementation can proceed using documented patterns in research.md. Only attention point: ensure accessibility requirements from UX contract are implemented (semantic HTML, ARIA attributes, keyboard navigation).

**Next Command**: \/speckit.tasks\ to generate implementation task breakdown
